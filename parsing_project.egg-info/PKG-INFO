Metadata-Version: 2.4
Name: parsing_project
Version: 0.1.0
Summary: Invoice parsing tool for daily sales register exports
Author: Kyle Allen Levocraft
Author-email: Kyle Allen <kyle@levocraft.com>
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pdfplumber
Requires-Dist: regex
Dynamic: author
Dynamic: license-file
Dynamic: requires-python

# ğŸ§¾ Daily Sales Register Parser

This tool parses fixed-width daily sales register text files exported from ERP systems like **Infor FACTS**, extracting invoice data and converting it into structured **JSON** and **CSV** formats.

---

## ğŸ“‚ Folder Structure

```
parsing_project/
â”œâ”€â”€ main.py                 # Entry point
â”œâ”€â”€ parser.py              # Invoice and line item parsing logic
â”œâ”€â”€ file_ops.py            # File reading, JSON/CSV output, file movement
â”œâ”€â”€ utils.py               # Logging, formatting, validation
â”œâ”€â”€ config.py              # Central config values
â”œâ”€â”€ dailysalesreg/         # Input folder for .txt files
â”‚   â””â”€â”€ logged/            # Processed files moved here
â”œâ”€â”€ json_output/
â”‚   â”œâ”€â”€ by_date/YYYY-MM-DD/
â”‚   â”œâ”€â”€ customers/CUSTOMER_CODE/
â”‚   â””â”€â”€ invoice_number.json
â””â”€â”€ processed_files.log    # Hashes of processed files to prevent duplicates
```

---

## ğŸš€ Getting Started

### Requirements

- Python 3.7+
- No external packages required (uses standard library)

---

## â–¶ï¸ Usage

### Basic (Parse all `.txt` files in `dailysalesreg/`)
```bash
python main.py
```

### Parse single file
```bash
python main.py dailysalesreg/05022025.txt
```

### Filter by customer
```bash
python main.py --customer 1766
```

### Filter by invoice date
```bash
python main.py --date 05/02/25
```

---

## âš™ï¸ Options

| Argument           | Description                                              |
|--------------------|----------------------------------------------------------|
| `file`             | (optional) Path to a `.txt` file to parse                |
| `--customer`       | Only extract invoices for a customer code                |
| `--date`           | Only extract invoices for a date (format: MM/DD/YY)      |
| `--limit`          | Process only first N invoices (for testing)              |
| `--dry-run`        | Donâ€™t save JSON/CSV or move files                        |
| `--skip-move`      | Donâ€™t move processed `.txt` file to `logged/` folder     |
| `--skip-processed` | Force reprocessing even if file was already handled      |
| `--verbose`        | Enable debug logging in console                          |
| `--logfile name`   | Write logs to a specific file (default: `process.log`)   |

---

## ğŸ“¦ Output

- JSON files are saved per invoice.
- A summary CSV with totals and match-check is generated per run.
- Files are organized under `json_output/` by:
  - Full runs â†’ `json_output/by_date/YYYY-MM-DD/`
  - Customer runs â†’ `json_output/customers/1766/`
  - Date runs â†’ `json_output/dates/YYYY-MM-DD/`

---

## âœ… Features

- Line item and header parsing
- Handles continued invoice pages
- Validates totals vs. calculated extensions
- Logs errors, skips bad lines, shows matches
- Supports CLI filtering, logging, testing
- Safe file handling and duplicate protection

---

## ğŸ“Œ Notes

- Invoice number must be 6 digits.
- Dates must be in MM/DD/YY format.
- Only `.txt` files placed in `dailysalesreg/` will be picked up automatically.

---

## ğŸ›  Example Development Command

```bash
python main.py --customer 100000 --verbose --dry-run --limit 5
```

---

## ğŸ§‘â€ğŸ’» Author

Kyle Allen  
Levocraft
[Levocraft]

---
